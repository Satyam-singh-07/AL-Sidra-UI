<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ongoing Works - Al Sidra</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .work-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
        }
        .media-preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .preview-image, .preview-video {
            width: 80px;
            height: 80px;
            border-radius: 4px;
            object-fit: cover;
        }
        .preview-video {
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
        }
        .file-input-label {
            border: 2px dashed #dee2e6;
            border-radius: 6px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: #f8f9fa;
        }
        .file-input-label:hover {
            border-color: #198754;
            background: #f1f7f4;
        }
        .file-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .file-list li {
            padding: 5px 10px;
            background: #f8f9fa;
            border-radius: 4px;
            margin-bottom: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .address-truncate {
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .table-actions .btn {
            margin-right: 5px;
        }
        .table-actions .btn:last-child {
            margin-right: 0;
        }
        .upload-requirements {
            font-size: 0.85rem;
            color: #6c757d;
            margin-top: 5px;
        }
        .progress-container {
            display: none;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="d-flex" id="wrapper">
        <div id="sidebar-wrapper"></div>
        <div id="page-content-wrapper" class="d-flex flex-column min-vh-100">
            <div id="header-container"></div>
            
            <div class="container-fluid p-4">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="text-success fw-bold">Ongoing Works</h2>
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addWorkModal">
                        <i class="fas fa-plus me-2"></i> Add New Work
                    </button>
                </div>

                <div class="card shadow-sm border-0">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>ID</th>
                                        <th>Title</th>
                                        <th>Images/Video</th>
                                        <th>Description</th>
                                        <th>Address</th>
                                        <th>Status</th>
                                        <th>Date</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Static Data Row 1 -->
                                    <tr>
                                        <td>1</td>
                                        <td>
                                            <strong>Masjid Al-Noor Expansion</strong><br>
                                            <small class="text-muted">Phase 1: Foundation</small>
                                        </td>
                                        <td>
                                            <div class="d-flex gap-1">
                                                <img src="https://via.placeholder.com/60x60/198754/fff?text=Img1" class="work-image" alt="Image 1">
                                                <img src="https://via.placeholder.com/60x60/0d6efd/fff?text=Img2" class="work-image" alt="Image 2">
                                                <div class="work-image bg-light d-flex align-items-center justify-content-center">
                                                    <i class="fas fa-video text-muted"></i>
                                                </div>
                                            </div>
                                        </td>
                                        <td>Expanding prayer hall capacity from 500 to 1000 worshippers...</td>
                                        <td class="address-truncate">123 Islamic Center Road, Makkah District</td>
                                        <td>
                                            <span class="status-badge bg-info text-white">In Progress</span>
                                        </td>
                                        <td>2025-01-15</td>
                                        <td class="table-actions">
                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#viewWorkModal" onclick="viewWork(1)">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#editWorkModal" onclick="editWork(1)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteWorkModal" onclick="setDeleteId(1)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    
                                    <!-- Static Data Row 2 -->
                                    <tr>
                                        <td>2</td>
                                        <td>
                                            <strong>Islamic School Renovation</strong><br>
                                            <small class="text-muted">Classroom Upgrade</small>
                                        </td>
                                        <td>
                                            <div class="d-flex gap-1">
                                                <img src="https://via.placeholder.com/60x60/ffc107/000?text=Img1" class="work-image" alt="Image 1">
                                                <img src="https://via.placeholder.com/60x60/dc3545/fff?text=Img2" class="work-image" alt="Image 2">
                                                <div class="work-image bg-light d-flex align-items-center justify-content-center">
                                                    <i class="fas fa-video text-muted"></i>
                                                </div>
                                            </div>
                                        </td>
                                        <td>Renovating 15 classrooms with modern facilities...</td>
                                        <td class="address-truncate">456 Education Street, Medina Sector</td>
                                        <td>
                                            <span class="status-badge bg-success text-white">Completed</span>
                                        </td>
                                        <td>2025-01-10</td>
                                        <td class="table-actions">
                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#viewWorkModal" onclick="viewWork(2)">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#editWorkModal" onclick="editWork(2)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteWorkModal" onclick="setDeleteId(2)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    
                                    <!-- Static Data Row 3 -->
                                    <tr>
                                        <td>3</td>
                                        <td>
                                            <strong>Community Center Construction</strong><br>
                                            <small class="text-muted">New Building</small>
                                        </td>
                                        <td>
                                            <div class="d-flex gap-1">
                                                <img src="https://via.placeholder.com/60x60/6f42c1/fff?text=Img1" class="work-image" alt="Image 1">
                                                <img src="https://via.placeholder.com/60x60/20c997/fff?text=Img2" class="work-image" alt="Image 2">
                                                <div class="work-image bg-light d-flex align-items-center justify-content-center">
                                                    <i class="fas fa-video text-muted"></i>
                                                </div>
                                            </div>
                                        </td>
                                        <td>New 3-story community center with library and gym...</td>
                                        <td class="address-truncate">789 Community Avenue, Riyadh</td>
                                        <td>
                                            <span class="status-badge bg-warning text-dark">Planning</span>
                                        </td>
                                        <td>2025-01-05</td>
                                        <td class="table-actions">
                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#viewWorkModal" onclick="viewWork(3)">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#editWorkModal" onclick="editWork(3)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteWorkModal" onclick="setDeleteId(3)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <footer id="footer-container"></footer>
        </div>
    </div>

    <!-- Add Work Modal -->
    <div class="modal fade" id="addWorkModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-success">Add New Ongoing Work</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addWorkForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Title *</label>
                                <input type="text" class="form-control" placeholder="Enter work title" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Status</label>
                                <select class="form-select">
                                    <option value="planning">Planning</option>
                                    <option value="in-progress" selected>In Progress</option>
                                    <option value="completed">Completed</option>
                                    <option value="on-hold">On Hold</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Description *</label>
                            <textarea class="form-control" rows="3" placeholder="Enter detailed description of the work" required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Address *</label>
                            <textarea class="form-control" rows="2" placeholder="Enter complete address" required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Upload Images (Minimum 5) *</label>
                            <div class="file-input-label" onclick="document.getElementById('imageUpload').click()">
                                <i class="fas fa-cloud-upload-alt fa-2x text-muted mb-2"></i>
                                <p class="mb-1">Click to upload images</p>
                                <p class="upload-requirements">Minimum 5 images required | Max 10MB each | JPG, PNG, GIF</p>
                            </div>
                            <input type="file" id="imageUpload" class="d-none" multiple accept="image/*" onchange="handleImageUpload(this)">
                            <div class="media-preview-container" id="imagePreview"></div>
                            <div class="progress-container" id="imageProgress">
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Upload Videos (Minimum 2) *</label>
                            <div class="file-input-label" onclick="document.getElementById('videoUpload').click()">
                                <i class="fas fa-video fa-2x text-muted mb-2"></i>
                                <p class="mb-1">Click to upload videos</p>
                                <p class="upload-requirements">Minimum 2 videos required | Max 50MB each | MP4, MOV, AVI</p>
                            </div>
                            <input type="file" id="videoUpload" class="d-none" multiple accept="video/*" onchange="handleVideoUpload(this)">
                            <div class="media-preview-container" id="videoPreview"></div>
                            <div class="progress-container" id="videoProgress">
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- <div class="mb-3">
                            <label class="form-label">Additional Notes</label>
                            <textarea class="form-control" rows="2" placeholder="Any additional information"></textarea>
                        </div> -->
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="saveWork()">Save Work</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Work Modal -->
    <div class="modal fade" id="viewWorkModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-primary">View Work Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-3">
                        <div class="col-md-8">
                            <h4 id="viewTitle">Masjid Al-Noor Expansion</h4>
                            <p class="text-muted mb-2">ID: <span id="viewId">1</span></p>
                            <span class="badge bg-info" id="viewStatus">In Progress</span>
                        </div>
                        <div class="col-md-4 text-end">
                            <p class="mb-1"><strong>Date Added:</strong></p>
                            <p id="viewDate">2025-01-15</p>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h6>Description</h6>
                        <p id="viewDescription" class="border rounded p-3 bg-light">Expanding prayer hall capacity from 500 to 1000 worshippers with new facilities including wudu area, library, and community hall.</p>
                    </div>
                    
                    <div class="mb-4">
                        <h6>Address</h6>
                        <p id="viewAddress" class="border rounded p-3 bg-light">123 Islamic Center Road, Makkah District, Riyadh 12345, Saudi Arabia</p>
                    </div>
                    
                    <div class="mb-4">
                        <h6>Images <span class="badge bg-secondary" id="imageCount">5</span></h6>
                        <div class="row g-2" id="viewImages">
                            <div class="col-3">
                                <img src="https://via.placeholder.com/150x150/198754/fff?text=Img1" class="img-fluid rounded" alt="Image">
                            </div>
                            <div class="col-3">
                                <img src="https://via.placeholder.com/150x150/0d6efd/fff?text=Img2" class="img-fluid rounded" alt="Image">
                            </div>
                            <!-- More images will be populated by JS -->
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <h6>Videos <span class="badge bg-secondary" id="videoCount">2</span></h6>
                        <div class="row g-2" id="viewVideos">
                            <div class="col-4">
                                <div class="border rounded p-3 text-center bg-light">
                                    <i class="fas fa-video fa-2x text-muted mb-2"></i>
                                    <p class="mb-0">Construction Progress</p>
                                </div>
                            </div>
                            <!-- More videos will be populated by JS -->
                        </div>
                    </div>
                    
                    <!-- <div class="mb-3">
                        <h6>Additional Notes</h6>
                        <p id="viewNotes" class="border rounded p-3 bg-light">Work is progressing as scheduled. Expected completion by June 2025.</p>
                    </div> -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Work Modal -->
    <div class="modal fade" id="editWorkModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-warning">Edit Work</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editWorkForm">
                        <input type="hidden" id="editId">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Title *</label>
                                <input type="text" id="editTitle" class="form-control" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Status</label>
                                <select class="form-select" id="editStatus">
                                    <option value="planning">Planning</option>
                                    <option value="in-progress">In Progress</option>
                                    <option value="completed">Completed</option>
                                    <option value="on-hold">On Hold</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Description *</label>
                            <textarea class="form-control" id="editDescription" rows="3" required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Address *</label>
                            <textarea class="form-control" id="editAddress" rows="2" required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Current Images</label>
                            <div class="media-preview-container" id="currentImages">
                                <!-- Current images will be shown here -->
                            </div>
                            <label class="form-label mt-3">Add More Images</label>
                            <input type="file" class="form-control" multiple accept="image/*">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Current Videos</label>
                            <div class="media-preview-container" id="currentVideos">
                                <!-- Current videos will be shown here -->
                            </div>
                            <label class="form-label mt-3">Add More Videos</label>
                            <input type="file" class="form-control" multiple accept="video/*">
                        </div>
                        
                        <!-- <div class="mb-3">
                            <label class="form-label">Additional Notes</label>
                            <textarea class="form-control" id="editNotes" rows="2"></textarea>
                        </div> -->
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="updateWork()">Update Work</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Work Modal -->
    <div class="modal fade" id="deleteWorkModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger"><i class="fas fa-exclamation-triangle me-2"></i>Confirm Delete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="mb-0">Are you sure you want to delete this work? All associated images and videos will be permanently removed.</p>
                    <div class="alert alert-warning mt-3 mb-0">
                        <strong>Work Title:</strong> <span id="deleteTitle">Masjid Al-Noor Expansion</span><br>
                        <strong>ID:</strong> <span id="deleteId">1</span><br>
                        <strong>Status:</strong> <span id="deleteStatus" class="badge bg-info">In Progress</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal" onclick="deleteWork()">Delete Work</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/main.js"></script>
    <script>
        // File upload handling
        let uploadedImages = [];
        let uploadedVideos = [];
        
        function handleImageUpload(input) {
            const files = Array.from(input.files);
            const preview = document.getElementById('imagePreview');
            preview.innerHTML = '';
            
            if (files.length < 5) {
                alert('Please select at least 5 images');
                input.value = '';
                return;
            }
            
            files.forEach((file, index) => {
                if (file.size > 10 * 1024 * 1024) {
                    alert(`File ${file.name} exceeds 10MB limit`);
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'preview-image';
                    preview.appendChild(img);
                    
                    uploadedImages.push({
                        name: file.name,
                        url: e.target.result,
                        file: file
                    });
                }
                reader.readAsDataURL(file);
            });
            
            // Show progress bar
            const progress = document.getElementById('imageProgress');
            progress.style.display = 'block';
            const progressBar = progress.querySelector('.progress-bar');
            
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        progress.style.display = 'none';
                        progressBar.style.width = '0%';
                    }, 500);
                } else {
                    width += 10;
                    progressBar.style.width = width + '%';
                }
            }, 100);
        }
        
        function handleVideoUpload(input) {
            const files = Array.from(input.files);
            const preview = document.getElementById('videoPreview');
            preview.innerHTML = '';
            
            if (files.length < 2) {
                alert('Please select at least 2 videos');
                input.value = '';
                return;
            }
            
            files.forEach((file, index) => {
                if (file.size > 50 * 1024 * 1024) {
                    alert(`File ${file.name} exceeds 50MB limit`);
                    return;
                }
                
                const div = document.createElement('div');
                div.className = 'preview-video';
                div.innerHTML = `
                    <div class="text-center">
                        <i class="fas fa-video fa-2x mb-2"></i>
                        <p class="small mb-0">${file.name}</p>
                        <p class="small text-muted mb-0">${(file.size / (1024 * 1024)).toFixed(1)} MB</p>
                    </div>
                `;
                preview.appendChild(div);
                
                uploadedVideos.push({
                    name: file.name,
                    size: file.size,
                    file: file
                });
            });
            
            // Show progress bar
            const progress = document.getElementById('videoProgress');
            progress.style.display = 'block';
            const progressBar = progress.querySelector('.progress-bar');
            
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        progress.style.display = 'none';
                        progressBar.style.width = '0%';
                    }, 500);
                } else {
                    width += 10;
                    progressBar.style.width = width + '%';
                }
            }, 100);
        }
        
        // CRUD Operations
        function saveWork() {
            const form = document.getElementById('addWorkForm');
            const title = form.querySelector('input[type="text"]').value;
            const description = form.querySelector('textarea').value;
            const address = form.querySelectorAll('textarea')[1].value;
            
            if (!title || !description || !address) {
                alert('Please fill all required fields');
                return;
            }
            
            if (uploadedImages.length < 5) {
                alert('Please upload at least 5 images');
                return;
            }
            
            if (uploadedVideos.length < 2) {
                alert('Please upload at least 2 videos');
                return;
            }
            
            // Here you would normally send data to server
            console.log('Saving work:', { title, description, address, uploadedImages, uploadedVideos });
            
            // Reset form
            form.reset();
            document.getElementById('imagePreview').innerHTML = '';
            document.getElementById('videoPreview').innerHTML = '';
            uploadedImages = [];
            uploadedVideos = [];
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addWorkModal'));
            modal.hide();
            
            alert('Work saved successfully!');
            // In real app, you would refresh the table here
        }
        
        function viewWork(id) {
            // Mock data - in real app, fetch from server
            const works = {
                1: {
                    id: 1,
                    title: 'Masjid Al-Noor Expansion',
                    status: 'in-progress',
                    description: 'Expanding prayer hall capacity from 500 to 1000 worshippers with new facilities including wudu area, library, and community hall.',
                    address: '123 Islamic Center Road, Makkah District, Riyadh 12345, Saudi Arabia',
                    date: '2025-01-15',
                    notes: 'Work is progressing as scheduled. Expected completion by June 2025.'
                },
                2: {
                    id: 2,
                    title: 'Islamic School Renovation',
                    status: 'completed',
                    description: 'Renovating 15 classrooms with modern facilities including smart boards, air conditioning, and new furniture.',
                    address: '456 Education Street, Medina Sector, Jeddah 23456, Saudi Arabia',
                    date: '2025-01-10',
                    notes: 'Renovation completed ahead of schedule. New academic year starting soon.'
                },
                3: {
                    id: 3,
                    title: 'Community Center Construction',
                    status: 'planning',
                    description: 'New 3-story community center with library, gym, meeting rooms, and cafeteria for community events.',
                    address: '789 Community Avenue, Riyadh Central, Riyadh 34567, Saudi Arabia',
                    date: '2025-01-05',
                    notes: 'Currently in planning phase. Seeking community feedback on facilities.'
                }
            };
            
            const work = works[id];
            if (!work) return;
            
            document.getElementById('viewId').textContent = work.id;
            document.getElementById('viewTitle').textContent = work.title;
            document.getElementById('viewDescription').textContent = work.description;
            document.getElementById('viewAddress').textContent = work.address;
            document.getElementById('viewDate').textContent = work.date;
            document.getElementById('viewNotes').textContent = work.notes;
            
            const statusMap = {
                'planning': { class: 'bg-warning text-dark', text: 'Planning' },
                'in-progress': { class: 'bg-info text-white', text: 'In Progress' },
                'completed': { class: 'bg-success text-white', text: 'Completed' },
                'on-hold': { class: 'bg-secondary text-white', text: 'On Hold' }
            };
            
            const statusBadge = document.getElementById('viewStatus');
            statusBadge.className = 'badge ' + statusMap[work.status].class;
            statusBadge.textContent = statusMap[work.status].text;
        }
        
        function editWork(id) {
            // Mock data - in real app, fetch from server
            const works = {
                1: {
                    id: 1,
                    title: 'Masjid Al-Noor Expansion',
                    status: 'in-progress',
                    description: 'Expanding prayer hall capacity from 500 to 1000 worshippers with new facilities including wudu area, library, and community hall.',
                    address: '123 Islamic Center Road, Makkah District, Riyadh 12345, Saudi Arabia',
                    notes: 'Work is progressing as scheduled. Expected completion by June 2025.'
                }
            };
            
            const work = works[id];
            if (!work) return;
            
            document.getElementById('editId').value = work.id;
            document.getElementById('editTitle').value = work.title;
            document.getElementById('editDescription').value = work.description;
            document.getElementById('editAddress').value = work.address;
            document.getElementById('editNotes').value = work.notes;
            document.getElementById('editStatus').value = work.status;
        }
        
        function setDeleteId(id) {
            // Mock data
            const works = {
                1: { title: 'Masjid Al-Noor Expansion', status: 'In Progress' },
                2: { title: 'Islamic School Renovation', status: 'Completed' },
                3: { title: 'Community Center Construction', status: 'Planning' }
            };
            
            const work = works[id];
            if (!work) return;
            
            document.getElementById('deleteId').textContent = id;
            document.getElementById('deleteTitle').textContent = work.title;
            document.getElementById('deleteStatus').textContent = work.status;
        }
        
        function updateWork() {
            const id = document.getElementById('editId').value;
            const title = document.getElementById('editTitle').value;
            const description = document.getElementById('editDescription').value;
            const address = document.getElementById('editAddress').value;
            const notes = document.getElementById('editNotes').value;
            const status = document.getElementById('editStatus').value;
            
            if (!title || !description || !address) {
                alert('Please fill all required fields');
                return;
            }
            
            // Here you would send update to server
            console.log('Updating work:', { id, title, description, address, notes, status });
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('editWorkModal'));
            modal.hide();
            
            alert('Work updated successfully!');
            // In real app, refresh the table
        }
        
        function deleteWork() {
            const id = document.getElementById('deleteId').textContent;
            
            // Here you would send delete request to server
            console.log('Deleting work with id:', id);
            
            alert('Work deleted successfully!');
            // In real app, remove the row from table
        }
        
        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', function() {
            // Any initialization code here
        });
    </script>
</body>
</html>