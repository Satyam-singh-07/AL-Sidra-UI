<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halala Restaurants - Al Sidra</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="css/style.css">
    <style>
        .restaurant-image {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 4px;
        }
        .menu-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 4px;
            border: 1px solid #dee2e6;
        }
        .media-preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 10px;
        }
        .preview-image, .preview-video, .preview-menu {
            width: 80px;
            height: 80px;
            border-radius: 4px;
            object-fit: cover;
        }
        .preview-video, .preview-menu {
            background: #f8f9fa;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
        }
        .file-input-label {
            border: 2px dashed #dee2e6;
            border-radius: 6px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: #f8f9fa;
        }
        .file-input-label:hover {
            border-color: #198754;
            background: #f1f7f4;
        }
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        .address-truncate {
            max-width: 200px;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }
        .table-actions .btn {
            margin-right: 5px;
        }
        .table-actions .btn:last-child {
            margin-right: 0;
        }
        .upload-requirements {
            font-size: 0.85rem;
            color: #6c757d;
            margin-top: 5px;
        }
        .progress-container {
            display: none;
            margin-top: 10px;
        }
        #map {
            height: 300px;
            width: 100%;
            border-radius: 8px;
            margin-top: 10px;
        }
        .location-display {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 6px;
            padding: 10px;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        .rating-stars {
            color: #ffc107;
            font-size: 0.9rem;
        }
        .cuisine-badge {
            background: #e7f1ff;
            color: #0d6efd;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.75rem;
            margin-right: 5px;
        }
        .map-marker {
            position: absolute;
            width: 30px;
            height: 40px;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="%23dc3545" d="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 256c-35.3 0-64-28.7-64-64s28.7-64 64-64s64 28.7 64 64s-28.7 64-64 64z"/></svg>');
            background-size: contain;
            transform: translate(-50%, -100%);
        }
    </style>
</head>
<body>
    <div class="d-flex" id="wrapper">
        <div id="sidebar-wrapper"></div>
        <div id="page-content-wrapper" class="d-flex flex-column min-vh-100">
            <div id="header-container"></div>
            
            <div class="container-fluid p-4">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2 class="text-success fw-bold">Halala Restaurants</h2>
                    <button class="btn btn-success" data-bs-toggle="modal" data-bs-target="#addRestaurantModal">
                        <i class="fas fa-plus me-2"></i> Add Restaurant
                    </button>
                </div>

                <div class="card shadow-sm border-0">
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead class="table-light">
                                    <tr>
                                        <th>ID</th>
                                        <th>Name</th>
                                        <th>Images/Menu</th>
                                        <th>Cuisine</th>
                                        <th>Description</th>
                                        <th>Address</th>
                                        <th>Rating</th>
                                        <th>Status</th>
                                        <th>Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <!-- Static Data Row 1 -->
                                    <tr>
                                        <td>1</td>
                                        <td>
                                            <strong>Al-Mandi House</strong><br>
                                            <small class="text-muted">Arabian Cuisine</small>
                                        </td>
                                        <td>
                                            <div class="d-flex gap-1">
                                                <img src="https://via.placeholder.com/60x60/198754/fff?text=Img1" class="restaurant-image" alt="Image 1">
                                                <img src="https://via.placeholder.com/60x60/0d6efd/fff?text=Img2" class="restaurant-image" alt="Image 2">
                                                <img src="https://via.placeholder.com/50x50/ffc107/000?text=Menu" class="menu-image" alt="Menu">
                                            </div>
                                        </td>
                                        <td>
                                            <span class="cuisine-badge">Arabian</span>
                                            <span class="cuisine-badge">Grill</span>
                                        </td>
                                        <td>Authentic Yemeni mandi and grilled meats...</td>
                                        <td class="address-truncate">123 Al-Mandi Street, Riyadh</td>
                                        <td>
                                            <div class="rating-stars">
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star-half-alt"></i>
                                                <span class="text-muted ms-1">4.5</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-badge bg-success text-white">Active</span>
                                        </td>
                                        <td class="table-actions">
                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#viewRestaurantModal" onclick="viewRestaurant(1)">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#editRestaurantModal" onclick="editRestaurant(1)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteRestaurantModal" onclick="setDeleteId(1)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    
                                    <!-- Static Data Row 2 -->
                                    <tr>
                                        <td>2</td>
                                        <td>
                                            <strong>Shawarma King</strong><br>
                                            <small class="text-muted">Fast Food</small>
                                        </td>
                                        <td>
                                            <div class="d-flex gap-1">
                                                <img src="https://via.placeholder.com/60x60/ffc107/000?text=Img1" class="restaurant-image" alt="Image 1">
                                                <img src="https://via.placeholder.com/60x60/dc3545/fff?text=Img2" class="restaurant-image" alt="Image 2">
                                                <img src="https://via.placeholder.com/50x50/6f42c1/fff?text=Menu" class="menu-image" alt="Menu">
                                            </div>
                                        </td>
                                        <td>
                                            <span class="cuisine-badge">Fast Food</span>
                                            <span class="cuisine-badge">Lebanese</span>
                                        </td>
                                        <td>Best shawarma in town with fresh ingredients...</td>
                                        <td class="address-truncate">456 Food Court, Jeddah Mall</td>
                                        <td>
                                            <div class="rating-stars">
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="far fa-star"></i>
                                                <span class="text-muted ms-1">4.0</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-badge bg-success text-white">Active</span>
                                        </td>
                                        <td class="table-actions">
                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#viewRestaurantModal" onclick="viewRestaurant(2)">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#editRestaurantModal" onclick="editRestaurant(2)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteRestaurantModal" onclick="setDeleteId(2)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    
                                    <!-- Static Data Row 3 -->
                                    <tr>
                                        <td>3</td>
                                        <td>
                                            <strong>Desert Oasis Cafe</strong><br>
                                            <small class="text-muted">Arabic Cafe</small>
                                        </td>
                                        <td>
                                            <div class="d-flex gap-1">
                                                <img src="https://via.placeholder.com/60x60/6f42c1/fff?text=Img1" class="restaurant-image" alt="Image 1">
                                                <img src="https://via.placeholder.com/60x60/20c997/fff?text=Img2" class="restaurant-image" alt="Image 2">
                                                <img src="https://via.placeholder.com/50x50/fd7e14/fff?text=Menu" class="menu-image" alt="Menu">
                                            </div>
                                        </td>
                                        <td>
                                            <span class="cuisine-badge">Cafe</span>
                                            <span class="cuisine-badge">Desserts</span>
                                        </td>
                                        <td>Traditional Arabic coffee with dates and sweets...</td>
                                        <td class="address-truncate">789 Oasis Road, Medina</td>
                                        <td>
                                            <div class="rating-stars">
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <i class="fas fa-star"></i>
                                                <span class="text-muted ms-1">5.0</span>
                                            </div>
                                        </td>
                                        <td>
                                            <span class="status-badge bg-warning text-dark">Pending</span>
                                        </td>
                                        <td class="table-actions">
                                            <button class="btn btn-sm btn-outline-primary" data-bs-toggle="modal" data-bs-target="#viewRestaurantModal" onclick="viewRestaurant(3)">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-warning" data-bs-toggle="modal" data-bs-target="#editRestaurantModal" onclick="editRestaurant(3)">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" data-bs-toggle="modal" data-bs-target="#deleteRestaurantModal" onclick="setDeleteId(3)">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <footer id="footer-container"></footer>
        </div>
    </div>

    <!-- Add Restaurant Modal -->
    <div class="modal fade" id="addRestaurantModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-success">Add New Restaurant</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="addRestaurantForm">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Restaurant Name *</label>
                                <input type="text" class="form-control" placeholder="Enter restaurant name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Cuisine Type *</label>
                                <select class="form-select" multiple>
                                    <option value="arabian">Arabian</option>
                                    <option value="lebanese">Lebanese</option>
                                    <option value="yemeni">Yemeni</option>
                                    <option value="fast-food">Fast Food</option>
                                    <option value="grill">Grill</option>
                                    <option value="cafe">Cafe</option>
                                    <option value="desserts">Desserts</option>
                                    <option value="seafood">Seafood</option>
                                </select>
                                <small class="text-muted">Hold Ctrl to select multiple</small>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Contact Phone</label>
                                <input type="tel" class="form-control" placeholder="+966 5X XXX XXXX">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Rating</label>
                                <select class="form-select">
                                    <option value="5">★★★★★ (5.0)</option>
                                    <option value="4.5">★★★★☆ (4.5)</option>
                                    <option value="4" selected>★★★★ (4.0)</option>
                                    <option value="3.5">★★★☆☆ (3.5)</option>
                                    <option value="3">★★★ (3.0)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Description *</label>
                            <textarea class="form-control" rows="3" placeholder="Enter restaurant description" required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Address *</label>
                            <textarea class="form-control" rows="2" placeholder="Enter complete address" required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Location on Map *</label>
                            <div id="addMap" style="height: 250px;"></div>
                            <div class="location-display mt-2">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span id="addLocationText">Click on map to set location</span>
                            </div>
                            <input type="hidden" id="addLatitude">
                            <input type="hidden" id="addLongitude">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Upload Images (Minimum 5) *</label>
                            <div class="file-input-label" onclick="document.getElementById('restaurantImageUpload').click()">
                                <i class="fas fa-cloud-upload-alt fa-2x text-muted mb-2"></i>
                                <p class="mb-1">Click to upload restaurant images</p>
                                <p class="upload-requirements">Minimum 5 images required | Max 10MB each | JPG, PNG, GIF</p>
                            </div>
                            <input type="file" id="restaurantImageUpload" class="d-none" multiple accept="image/*" onchange="handleRestaurantImageUpload(this)">
                            <div class="media-preview-container" id="restaurantImagePreview"></div>
                            <div class="progress-container" id="restaurantImageProgress">
                                <div class="progress">
                                    <div class="progress-bar" role="progressbar" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Upload Videos (Optional)</label>
                            <div class="file-input-label" onclick="document.getElementById('restaurantVideoUpload').click()">
                                <i class="fas fa-video fa-2x text-muted mb-2"></i>
                                <p class="mb-1">Click to upload restaurant videos</p>
                                <p class="upload-requirements">Max 50MB each | MP4, MOV, AVI</p>
                            </div>
                            <input type="file" id="restaurantVideoUpload" class="d-none" multiple accept="video/*" onchange="handleRestaurantVideoUpload(this)">
                            <div class="media-preview-container" id="restaurantVideoPreview"></div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Upload Menu Image *</label>
                            <div class="file-input-label" onclick="document.getElementById('menuImageUpload').click()">
                                <i class="fas fa-utensils fa-2x text-muted mb-2"></i>
                                <p class="mb-1">Click to upload menu image</p>
                                <p class="upload-requirements">Single image required | Max 5MB | JPG, PNG</p>
                            </div>
                            <input type="file" id="menuImageUpload" class="d-none" accept="image/*" onchange="handleMenuImageUpload(this)">
                            <div class="media-preview-container" id="menuImagePreview"></div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Opening Hours</label>
                                <input type="text" class="form-control" placeholder="e.g., 9:00 AM - 11:00 PM">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Status</label>
                                <select class="form-select">
                                    <option value="active" selected>Active</option>
                                    <option value="inactive">Inactive</option>
                                    <option value="pending">Pending</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Additional Information</label>
                            <textarea class="form-control" rows="2" placeholder="Any additional details about the restaurant"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="saveRestaurant()">Save Restaurant</button>
                </div>
            </div>
        </div>
    </div>

    <!-- View Restaurant Modal -->
    <div class="modal fade" id="viewRestaurantModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-primary">Restaurant Details</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-3">
                        <div class="col-md-8">
                            <h4 id="viewRestaurantTitle">Al-Mandi House</h4>
                            <p class="text-muted mb-2">ID: <span id="viewRestaurantId">1</span></p>
                            <div id="viewCuisineTags" class="mb-2">
                                <span class="cuisine-badge">Arabian</span>
                                <span class="cuisine-badge">Grill</span>
                            </div>
                            <span class="badge bg-success" id="viewRestaurantStatus">Active</span>
                        </div>
                        <div class="col-md-4 text-end">
                            <div class="rating-stars" id="viewRating">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star-half-alt"></i>
                                <span class="text-muted ms-1">4.5</span>
                            </div>
                            <p class="mb-1 mt-2"><strong>Opening Hours:</strong></p>
                            <p id="viewHours">10:00 AM - 12:00 AM</p>
                        </div>
                    </div>
                    
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <h6>Contact</h6>
                            <p id="viewPhone" class="border rounded p-3 bg-light">
                                <i class="fas fa-phone me-2"></i>+966 50 123 4567
                            </p>
                        </div>
                        <div class="col-md-6">
                            <h6>Address</h6>
                            <p id="viewRestaurantAddress" class="border rounded p-3 bg-light">
                                <i class="fas fa-map-marker-alt me-2 text-danger"></i>123 Al-Mandi Street, Riyadh, Saudi Arabia
                            </p>
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h6>Description</h6>
                        <p id="viewRestaurantDescription" class="border rounded p-3 bg-light">Authentic Yemeni mandi and grilled meats prepared with traditional recipes and served in a cozy Arabian atmosphere.</p>
                    </div>
                    
                    <div class="mb-4">
                        <h6>Location Map</h6>
                        <div id="viewMap" style="height: 250px;"></div>
                    </div>
                    
                    <div class="mb-4">
                        <h6>Images</h6>
                        <div class="row g-2" id="viewRestaurantImages">
                            <div class="col-2">
                                <img src="https://via.placeholder.com/100x100/198754/fff?text=Img1" class="img-fluid rounded" alt="Restaurant Image">
                            </div>
                            <div class="col-2">
                                <img src="https://via.placeholder.com/100x100/0d6efd/fff?text=Img2" class="img-fluid rounded" alt="Restaurant Image">
                            </div>
                            <!-- More images will be populated by JS -->
                        </div>
                    </div>
                    
                    <div class="mb-4">
                        <h6>Menu</h6>
                        <div class="row">
                            <div class="col-3">
                                <img src="https://via.placeholder.com/150x200/ffc107/000?text=MENU" class="img-fluid rounded border" alt="Menu" id="viewMenuImage">
                            </div>
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <h6>Videos</h6>
                        <div class="row g-2" id="viewRestaurantVideos">
                            <div class="col-4">
                                <div class="border rounded p-3 text-center bg-light">
                                    <i class="fas fa-video fa-2x text-muted mb-2"></i>
                                    <p class="mb-0">Restaurant Tour</p>
                                </div>
                            </div>
                            <!-- More videos will be populated by JS -->
                        </div>
                    </div>
                    
                    <div class="mb-3">
                        <h6>Additional Information</h6>
                        <p id="viewRestaurantNotes" class="border rounded p-3 bg-light">Free parking available. Family section available. Halal certified.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Restaurant Modal -->
    <div class="modal fade" id="editRestaurantModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-warning">Edit Restaurant</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="editRestaurantForm">
                        <input type="hidden" id="editRestaurantId">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Restaurant Name *</label>
                                <input type="text" id="editRestaurantName" class="form-control" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Cuisine Type *</label>
                                <select class="form-select" id="editCuisine" multiple>
                                    <option value="arabian">Arabian</option>
                                    <option value="lebanese">Lebanese</option>
                                    <option value="yemeni">Yemeni</option>
                                    <option value="fast-food">Fast Food</option>
                                    <option value="grill">Grill</option>
                                    <option value="cafe">Cafe</option>
                                    <option value="desserts">Desserts</option>
                                    <option value="seafood">Seafood</option>
                                </select>
                                <small class="text-muted">Hold Ctrl to select multiple</small>
                            </div>
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Contact Phone</label>
                                <input type="tel" id="editPhone" class="form-control">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Rating</label>
                                <select class="form-select" id="editRating">
                                    <option value="5">★★★★★ (5.0)</option>
                                    <option value="4.5">★★★★☆ (4.5)</option>
                                    <option value="4">★★★★ (4.0)</option>
                                    <option value="3.5">★★★☆☆ (3.5)</option>
                                    <option value="3">★★★ (3.0)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Description *</label>
                            <textarea class="form-control" id="editRestaurantDescription" rows="3" required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Address *</label>
                            <textarea class="form-control" id="editRestaurantAddress" rows="2" required></textarea>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Location on Map</label>
                            <div id="editMap" style="height: 250px;"></div>
                            <div class="location-display mt-2">
                                <i class="fas fa-map-marker-alt text-danger me-2"></i>
                                <span id="editLocationText">Click on map to change location</span>
                            </div>
                            <input type="hidden" id="editLatitude">
                            <input type="hidden" id="editLongitude">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Current Images</label>
                            <div class="media-preview-container" id="currentRestaurantImages">
                                <!-- Current images will be shown here -->
                            </div>
                            <label class="form-label mt-3">Add More Images</label>
                            <input type="file" class="form-control" multiple accept="image/*">
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Current Menu Image</label>
                            <div class="media-preview-container" id="currentMenuImage">
                                <!-- Current menu image will be shown here -->
                            </div>
                            <label class="form-label mt-3">Change Menu Image</label>
                            <input type="file" class="form-control" accept="image/*">
                        </div>
                        
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Opening Hours</label>
                                <input type="text" id="editHours" class="form-control">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">Status</label>
                                <select class="form-select" id="editRestaurantStatus">
                                    <option value="active">Active</option>
                                    <option value="inactive">Inactive</option>
                                    <option value="pending">Pending</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Additional Information</label>
                            <textarea class="form-control" id="editRestaurantNotes" rows="2"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-success" onclick="updateRestaurant()">Update Restaurant</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Delete Restaurant Modal -->
    <div class="modal fade" id="deleteRestaurantModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title text-danger"><i class="fas fa-exclamation-triangle me-2"></i>Confirm Delete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p class="mb-0">Are you sure you want to delete this restaurant? All associated images, videos, and menu will be permanently removed.</p>
                    <div class="alert alert-warning mt-3 mb-0">
                        <strong>Restaurant Name:</strong> <span id="deleteRestaurantName">Al-Mandi House</span><br>
                        <strong>ID:</strong> <span id="deleteRestaurantId">1</span><br>
                        <strong>Cuisine:</strong> <span id="deleteCuisine">Arabian, Grill</span><br>
                        <strong>Status:</strong> <span id="deleteRestaurantStatus" class="badge bg-success">Active</span>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal" onclick="deleteRestaurant()">Delete Restaurant</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/main.js"></script>
    <script>
        // Global variables
        let addMap, viewMap, editMap;
        let restaurantImages = [];
        let restaurantVideos = [];
        let menuImage = null;
        
        // Initialize maps when modals are shown
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize add map when modal is shown
            const addModal = document.getElementById('addRestaurantModal');
            addModal.addEventListener('shown.bs.modal', function() {
                if (!addMap) {
                    initAddMap();
                }
            });
            
            // Initialize view map when modal is shown
            const viewModal = document.getElementById('viewRestaurantModal');
            viewModal.addEventListener('shown.bs.modal', function() {
                if (!viewMap) {
                    initViewMap();
                }
            });
            
            // Initialize edit map when modal is shown
            const editModal = document.getElementById('editRestaurantModal');
            editModal.addEventListener('shown.bs.modal', function() {
                if (!editMap) {
                    initEditMap();
                }
            });
        });
        
        function initAddMap() {
            addMap = L.map('addMap').setView([24.7136, 46.6753], 12); // Riyadh coordinates
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(addMap);
            
            let marker;
            
            addMap.on('click', function(e) {
                const lat = e.latlng.lat;
                const lng = e.latlng.lng;
                
                document.getElementById('addLatitude').value = lat;
                document.getElementById('addLongitude').value = lng;
                document.getElementById('addLocationText').textContent = `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;
                
                if (marker) {
                    addMap.removeLayer(marker);
                }
                
                marker = L.marker([lat, lng]).addTo(addMap)
                    .bindPopup('Restaurant Location')
                    .openPopup();
            });
        }
        
        function initViewMap() {
            viewMap = L.map('viewMap').setView([24.7136, 46.6753], 15);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(viewMap);
            
            // Add marker for the restaurant
            L.marker([24.7136, 46.6753]).addTo(viewMap)
                .bindPopup('Al-Mandi House<br>123 Al-Mandi Street')
                .openPopup();
        }
        
        function initEditMap() {
            editMap = L.map('editMap').setView([24.7136, 46.6753], 12);
            
            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
            }).addTo(editMap);
            
            let marker = L.marker([24.7136, 46.6753]).addTo(editMap)
                .bindPopup('Current Location')
                .openPopup();
            
            document.getElementById('editLocationText').textContent = 'Lat: 24.713600, Lng: 46.675300';
            
            editMap.on('click', function(e) {
                const lat = e.latlng.lat;
                const lng = e.latlng.lng;
                
                document.getElementById('editLatitude').value = lat;
                document.getElementById('editLongitude').value = lng;
                document.getElementById('editLocationText').textContent = `Lat: ${lat.toFixed(6)}, Lng: ${lng.toFixed(6)}`;
                
                editMap.removeLayer(marker);
                marker = L.marker([lat, lng]).addTo(editMap)
                    .bindPopup('New Location')
                    .openPopup();
            });
        }
        
        // File upload handling
        function handleRestaurantImageUpload(input) {
            const files = Array.from(input.files);
            const preview = document.getElementById('restaurantImagePreview');
            preview.innerHTML = '';
            
            if (files.length < 5) {
                alert('Please select at least 5 images');
                input.value = '';
                return;
            }
            
            files.forEach((file, index) => {
                if (file.size > 10 * 1024 * 1024) {
                    alert(`File ${file.name} exceeds 10MB limit`);
                    return;
                }
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    const img = document.createElement('img');
                    img.src = e.target.result;
                    img.className = 'preview-image';
                    preview.appendChild(img);
                    
                    restaurantImages.push({
                        name: file.name,
                        url: e.target.result,
                        file: file
                    });
                }
                reader.readAsDataURL(file);
            });
            
            // Show progress bar
            const progress = document.getElementById('restaurantImageProgress');
            progress.style.display = 'block';
            const progressBar = progress.querySelector('.progress-bar');
            
            let width = 0;
            const interval = setInterval(() => {
                if (width >= 100) {
                    clearInterval(interval);
                    setTimeout(() => {
                        progress.style.display = 'none';
                        progressBar.style.width = '0%';
                    }, 500);
                } else {
                    width += 10;
                    progressBar.style.width = width + '%';
                }
            }, 100);
        }
        
        function handleRestaurantVideoUpload(input) {
            const files = Array.from(input.files);
            const preview = document.getElementById('restaurantVideoPreview');
            preview.innerHTML = '';
            
            files.forEach((file, index) => {
                if (file.size > 50 * 1024 * 1024) {
                    alert(`File ${file.name} exceeds 50MB limit`);
                    return;
                }
                
                const div = document.createElement('div');
                div.className = 'preview-video';
                div.innerHTML = `
                    <div class="text-center">
                        <i class="fas fa-video fa-2x mb-2"></i>
                        <p class="small mb-0">${file.name}</p>
                        <p class="small text-muted mb-0">${(file.size / (1024 * 1024)).toFixed(1)} MB</p>
                    </div>
                `;
                preview.appendChild(div);
                
                restaurantVideos.push({
                    name: file.name,
                    size: file.size,
                    file: file
                });
            });
        }
        
        function handleMenuImageUpload(input) {
            const file = input.files[0];
            const preview = document.getElementById('menuImagePreview');
            preview.innerHTML = '';
            
            if (!file) return;
            
            if (file.size > 5 * 1024 * 1024) {
                alert('Menu image exceeds 5MB limit');
                input.value = '';
                return;
            }
            
            const reader = new FileReader();
            reader.onload = function(e) {
                const img = document.createElement('img');
                img.src = e.target.result;
                img.className = 'preview-menu';
                preview.appendChild(img);
                
                menuImage = {
                    name: file.name,
                    url: e.target.result,
                    file: file
                };
            }
            reader.readAsDataURL(file);
        }
        
        // CRUD Operations
        function saveRestaurant() {
            const form = document.getElementById('addRestaurantForm');
            const name = form.querySelector('input[type="text"]').value;
            const description = form.querySelector('textarea').value;
            const address = form.querySelectorAll('textarea')[1].value;
            const latitude = document.getElementById('addLatitude').value;
            const longitude = document.getElementById('addLongitude').value;
            
            if (!name || !description || !address) {
                alert('Please fill all required fields');
                return;
            }
            
            if (!latitude || !longitude) {
                alert('Please select location on map');
                return;
            }
            
            if (restaurantImages.length < 5) {
                alert('Please upload at least 5 images');
                return;
            }
            
            if (!menuImage) {
                alert('Please upload menu image');
                return;
            }
            
            // Here you would normally send data to server
            console.log('Saving restaurant:', { 
                name, 
                description, 
                address, 
                latitude, 
                longitude,
                restaurantImages, 
                restaurantVideos,
                menuImage 
            });
            
            // Reset form
            form.reset();
            document.getElementById('restaurantImagePreview').innerHTML = '';
            document.getElementById('restaurantVideoPreview').innerHTML = '';
            document.getElementById('menuImagePreview').innerHTML = '';
            document.getElementById('addLocationText').textContent = 'Click on map to set location';
            restaurantImages = [];
            restaurantVideos = [];
            menuImage = null;
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('addRestaurantModal'));
            modal.hide();
            
            alert('Restaurant saved successfully!');
            // In real app, you would refresh the table here
        }
        
        function viewRestaurant(id) {
            // Mock data - in real app, fetch from server
            const restaurants = {
                1: {
                    id: 1,
                    name: 'Al-Mandi House',
                    cuisine: ['arabian', 'grill'],
                    description: 'Authentic Yemeni mandi and grilled meats prepared with traditional recipes and served in a cozy Arabian atmosphere.',
                    address: '123 Al-Mandi Street, Riyadh, Saudi Arabia',
                    phone: '+966 50 123 4567',
                    rating: 4.5,
                    hours: '10:00 AM - 12:00 AM',
                    status: 'active',
                    notes: 'Free parking available. Family section available. Halal certified.'
                },
                2: {
                    id: 2,
                    name: 'Shawarma King',
                    cuisine: ['fast-food', 'lebanese'],
                    description: 'Best shawarma in town with fresh ingredients and authentic Lebanese recipes.',
                    address: '456 Food Court, Jeddah Mall, Jeddah, Saudi Arabia',
                    phone: '+966 50 234 5678',
                    rating: 4.0,
                    hours: '11:00 AM - 1:00 AM',
                    status: 'active',
                    notes: 'Takeaway available. Delivery service through apps.'
                },
                3: {
                    id: 3,
                    name: 'Desert Oasis Cafe',
                    cuisine: ['cafe', 'desserts'],
                    description: 'Traditional Arabic coffee with dates and sweets in a peaceful desert-themed setting.',
                    address: '789 Oasis Road, Medina, Saudi Arabia',
                    phone: '+966 50 345 6789',
                    rating: 5.0,
                    hours: '7:00 AM - 11:00 PM',
                    status: 'pending',
                    notes: 'WiFi available. Outdoor seating with traditional majlis.'
                }
            };
            
            const restaurant = restaurants[id];
            if (!restaurant) return;
            
            document.getElementById('viewRestaurantId').textContent = restaurant.id;
            document.getElementById('viewRestaurantTitle').textContent = restaurant.name;
            document.getElementById('viewRestaurantDescription').textContent = restaurant.description;
            document.getElementById('viewRestaurantAddress').textContent = restaurant.address;
            document.getElementById('viewPhone').innerHTML = `<i class="fas fa-phone me-2"></i>${restaurant.phone}`;
            document.getElementById('viewHours').textContent = restaurant.hours;
            document.getElementById('viewRestaurantNotes').textContent = restaurant.notes;
            
            // Set cuisine tags
            const cuisineContainer = document.getElementById('viewCuisineTags');
            cuisineContainer.innerHTML = '';
            restaurant.cuisine.forEach(cuisine => {
                const badge = document.createElement('span');
                badge.className = 'cuisine-badge';
                badge.textContent = cuisine.charAt(0).toUpperCase() + cuisine.slice(1);
                cuisineContainer.appendChild(badge);
            });
            
            // Set rating stars
            const ratingContainer = document.getElementById('viewRating');
            ratingContainer.innerHTML = '';
            const fullStars = Math.floor(restaurant.rating);
            const hasHalfStar = restaurant.rating % 1 !== 0;
            
            for (let i = 0; i < fullStars; i++) {
                ratingContainer.innerHTML += '<i class="fas fa-star"></i>';
            }
            if (hasHalfStar) {
                ratingContainer.innerHTML += '<i class="fas fa-star-half-alt"></i>';
            }
            for (let i = fullStars + (hasHalfStar ? 1 : 0); i < 5; i++) {
                ratingContainer.innerHTML += '<i class="far fa-star"></i>';
            }
            ratingContainer.innerHTML += `<span class="text-muted ms-1">${restaurant.rating}</span>`;
            
            // Set status
            const statusMap = {
                'active': { class: 'bg-success text-white', text: 'Active' },
                'inactive': { class: 'bg-secondary text-white', text: 'Inactive' },
                'pending': { class: 'bg-warning text-dark', text: 'Pending' }
            };
            
            const statusBadge = document.getElementById('viewRestaurantStatus');
            statusBadge.className = 'badge ' + statusMap[restaurant.status].class;
            statusBadge.textContent = statusMap[restaurant.status].text;
        }
        
        function editRestaurant(id) {
            // Mock data - in real app, fetch from server
            const restaurants = {
                1: {
                    id: 1,
                    name: 'Al-Mandi House',
                    cuisine: ['arabian', 'grill'],
                    description: 'Authentic Yemeni mandi and grilled meats prepared with traditional recipes and served in a cozy Arabian atmosphere.',
                    address: '123 Al-Mandi Street, Riyadh, Saudi Arabia',
                    phone: '+966 50 123 4567',
                    rating: 4.5,
                    hours: '10:00 AM - 12:00 AM',
                    status: 'active',
                    notes: 'Free parking available. Family section available. Halal certified.'
                }
            };
            
            const restaurant = restaurants[id];
            if (!restaurant) return;
            
            document.getElementById('editRestaurantId').value = restaurant.id;
            document.getElementById('editRestaurantName').value = restaurant.name;
            document.getElementById('editRestaurantDescription').value = restaurant.description;
            document.getElementById('editRestaurantAddress').value = restaurant.address;
            document.getElementById('editPhone').value = restaurant.phone;
            document.getElementById('editHours').value = restaurant.hours;
            document.getElementById('editRestaurantNotes').value = restaurant.notes;
            document.getElementById('editRestaurantStatus').value = restaurant.status;
            document.getElementById('editRating').value = restaurant.rating.toString();
            
            // Set cuisine selections
            const cuisineSelect = document.getElementById('editCuisine');
            Array.from(cuisineSelect.options).forEach(option => {
                option.selected = restaurant.cuisine.includes(option.value);
            });
        }
        
        function setDeleteId(id) {
            // Mock data
            const restaurants = {
                1: { 
                    name: 'Al-Mandi House', 
                    cuisine: 'Arabian, Grill',
                    status: 'Active' 
                },
                2: { 
                    name: 'Shawarma King', 
                    cuisine: 'Fast Food, Lebanese',
                    status: 'Active' 
                },
                3: { 
                    name: 'Desert Oasis Cafe', 
                    cuisine: 'Cafe, Desserts',
                    status: 'Pending' 
                }
            };
            
            const restaurant = restaurants[id];
            if (!restaurant) return;
            
            document.getElementById('deleteRestaurantId').textContent = id;
            document.getElementById('deleteRestaurantName').textContent = restaurant.name;
            document.getElementById('deleteCuisine').textContent = restaurant.cuisine;
            
            const statusBadge = document.getElementById('deleteRestaurantStatus');
            statusBadge.className = 'badge ' + (restaurant.status === 'Active' ? 'bg-success' : 'bg-warning');
            statusBadge.textContent = restaurant.status;
        }
        
        function updateRestaurant() {
            const id = document.getElementById('editRestaurantId').value;
            const name = document.getElementById('editRestaurantName').value;
            const description = document.getElementById('editRestaurantDescription').value;
            const address = document.getElementById('editRestaurantAddress').value;
            const phone = document.getElementById('editPhone').value;
            const hours = document.getElementById('editHours').value;
            const notes = document.getElementById('editRestaurantNotes').value;
            const status = document.getElementById('editRestaurantStatus').value;
            const rating = document.getElementById('editRating').value;
            
            if (!name || !description || !address) {
                alert('Please fill all required fields');
                return;
            }
            
            // Here you would send update to server
            console.log('Updating restaurant:', { 
                id, name, description, address, phone, hours, notes, status, rating 
            });
            
            // Close modal
            const modal = bootstrap.Modal.getInstance(document.getElementById('editRestaurantModal'));
            modal.hide();
            
            alert('Restaurant updated successfully!');
            // In real app, refresh the table
        }
        
        function deleteRestaurant() {
            const id = document.getElementById('deleteRestaurantId').textContent;
            
            // Here you would send delete request to server
            console.log('Deleting restaurant with id:', id);
            
            alert('Restaurant deleted successfully!');
            // In real app, remove the row from table
        }
    </script>
</body>
</html>